
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/recommend_usage.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_recommend_usage.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_recommend_usage.py:


Basic usage of CDSS to generate a protocol recommendation.
==========================================================

This example demonstrates how to use the `DataLoader`, `DataProcessor`, and `CDSS`
to load data and generate a 7-day protocol plan.

.. GENERATED FROM PYTHON SOURCE LINES 10-68




.. rst-class:: sphx-glr-script-out

 .. code-block:: none


       PATIENT_ID  PROTOCOL_ID       PPF                                            CONTRIB  ADHERENCE  DM_VALUE   PE_VALUE  USAGE                DAYS     SCORE
    0           1            1  0.562178  [0.212189, 0.033685, 0.077469, 0.102304, 0.136...   0.712004  6.890026  34.447853    100     [0, 1, 2, 3, 6]  8.164208
    1           1            2  0.965500    [0.43319, 0.062738, 0.203374, 0.2528, 0.013398]   0.655415  6.119549  77.907190    100     [1, 2, 3, 4, 5]  7.740464
    2           1            3  0.812396   [0.100859, 0.02016, 0.007253, 0.32066, 0.363464]   0.651554  6.750162  39.498897    100  [0, 1, 2, 3, 4, 5]  8.214112






|

.. code-block:: Python


    import sys
    sys.path.append("..")
    from ai_cdss.cdss import CDSS
    from ai_cdss.data_loader import DataLoaderMock
    from ai_cdss.data_processor import DataProcessor
    # from IPython.display import display

    print(__doc__)

    PATIENT_LIST = [
        775,  787,  788
    ]

    # Parameters
    rgs_mode = "app"
    weights = [1,1,1]
    alpha = 0.5

    n = 12
    days = 7
    protocols_per_day = 5

    # Services
    loader = DataLoaderMock(
        num_patients=5,
        num_protocols=4,
        num_sessions=10
    )
    processor = DataProcessor(
        weights=weights,
        alpha=alpha
    )

    # Execution
    session = loader.load_session_data(patient_list=PATIENT_LIST)
    timeseries = loader.load_timeseries_data(patient_list=PATIENT_LIST)
    ppf = loader.load_ppf_data(patient_list=PATIENT_LIST)

    protocol_similarity = loader.load_protocol_similarity()

    scores = processor.process_data(session_data=session, timeseries_data=timeseries, ppf_data=ppf)

    # CDSS
    cdss = CDSS(
        scoring=scores,
        n=n,
        days=days,
        protocols_per_day=protocols_per_day
    )

    # Results
    # patient_id = PATIENT_LIST[0]
    patient_id = 1

    recommendation = cdss.recommend(patient_id=patient_id, protocol_similarity=protocol_similarity)
    print(recommendation)



.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 1.931 seconds)


.. _sphx_glr_download_auto_examples_recommend_usage.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: recommend_usage.ipynb <recommend_usage.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: recommend_usage.py <recommend_usage.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: recommend_usage.zip <recommend_usage.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
